{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/Gabe/Documents/Projects/sudokoo/src/components/SudokuController.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { colors } from \"../colors.js\";\nimport { Sudoku } from \"./sudoku\";\nimport { nakedSingle, hiddenSingle, nakedPair, lockedCandidate, pointingTuple } from \"./techniques\";\nexport const SudokuController = props => {\n  _s();\n\n  const [state, setState] = useState([]);\n  var techniques = [nakedSingle, hiddenSingle, nakedPair, lockedCandidate, pointingTuple]; // Naked Single Test\n\n  var input = [[0, 4, 9, 0, 0, 0, 0, 3, 0], [0, 5, 0, 6, 1, 0, 0, 0, 0], [0, 0, 8, 0, 2, 9, 5, 0, 6], [8, 0, 0, 9, 0, 7, 0, 0, 4], [7, 0, 0, 0, 0, 0, 0, 8, 1], [0, 2, 5, 0, 4, 1, 3, 0, 0], [2, 0, 0, 0, 7, 6, 0, 1, 0], [5, 0, 0, 4, 0, 8, 7, 0, 0], [0, 8, 7, 0, 0, 0, 0, 9, 5]]; // Hidden Single Test\n  // var input = [\n  //   [0, 7, 2, 3, 0, 0, 9, 0, 0],\n  //   [0, 5, 0, 6, 0, 9, 0, 2, 0],\n  //   [6, 0, 0, 0, 1, 0, 0, 3, 0],\n  //   [0, 0, 0, 0, 0, 0, 2, 0, 0],\n  //   [0, 4, 5, 8, 2, 3, 0, 7, 0],\n  //   [0, 3, 0, 4, 0, 0, 0, 0, 8],\n  //   [7, 0, 0, 0, 0, 0, 0, 0, 4],\n  //   [0, 2, 0, 5, 0, 8, 0, 6, 0],\n  //   [0, 0, 3, 0, 0, 1, 7, 0, 0],\n  // ];\n  // Naked Pair Test\n  // var input = [\n  //   [0, 3, 0, 0, 0, 8, 0, 0, 7],\n  //   [8, 0, 0, 3, 0, 0, 2, 6, 0],\n  //   [0, 0, 0, 0, 2, 9, 8, 3, 4],\n  //   [0, 0, 0, 0, 0, 4, 3, 0, 0],\n  //   [6, 0, 8, 1, 3, 2, 0, 0, 9],\n  //   [0, 0, 3, 0, 0, 0, 0, 0, 0],\n  //   [1, 0, 5, 4, 9, 3, 7, 8, 0],\n  //   [0, 8, 0, 2, 7, 1, 0, 0, 3],\n  //   [3, 0, 7, 8, 0, 0, 0, 1, 0],\n  // ];\n  // input is a 2d array of starting values\n\n  const loadSudoku = input => {\n    console.log(\"Loading Sudoku...\");\n    state.sudoku = {\n      rows: buildEmpty2DArray(),\n      cols: buildEmpty2DArray(),\n      houses: buildEmpty2DArray()\n    };\n    state.unsolved = []; // for every sudoku cell...\n\n    for (let h = 0; h < 9; h++) {\n      for (let r = 0; r < 9; r++) {\n        let y = 3 * Math.floor(h / 3) + Math.floor(r / 3);\n        let x = 3 * (h % 3) + r % 3; // create cell object\n\n        let val = input[y][x];\n        let isUnsolved = !(val >= 1 && val <= 9);\n        var cell = buildNewCell(y, x, h, r, val, !isUnsolved); // store cell in each state object\n\n        state.sudoku.houses[h][r] = cell;\n        state.sudoku.rows[y][x] = cell;\n        state.sudoku.cols[x][y] = cell;\n        if (isUnsolved) state.unsolved.push(cell);\n      }\n    } // identify each cell's suspect values\n\n\n    let axes = [state.sudoku.rows, state.sudoku.cols, state.sudoku.houses];\n\n    for (let cell of state.unsolved.values()) {\n      let indexes = [cell.row, cell.col, cell.house]; // for each axis (row, col, house) this cell belongs to...\n\n      for (let i = 0; i < 3; i++) {\n        // ...for each cell in that axis...\n        axes[i][indexes[i]].forEach(other => {\n          // ...if the cell's value is set...\n          if (other.val >= 1 && other.val <= 9) {\n            // ...remove it from suspect list.\n            cell.notes[other.val - 1] = 0;\n          }\n        });\n      }\n    } // push to Sudoku as props\n\n\n    pushState(); //console.log(localState);\n\n    console.log(\"...Sudoku Loaded\");\n  };\n\n  const pushState = () => {\n    let localState = {\n      sudoku: state.sudoku,\n      unsolved: state.unsolved\n    };\n    setState(localState);\n  };\n\n  const getNextSolution = () => {\n    if (state.unsolved.size === 0) {\n      console.log(\"Nothing left to solve.\");\n      return false;\n    } else {\n      let sudokuCopy = copySudoku(state.sudoku); // for each solving technique...\n\n      for (let t = 0; t < techniques.length; t++) {\n        // ...for each unsolved cell...\n        for (let cell of state.unsolved) {\n          // ...if this cell can be solved w this technique...\n          let showcase = techniques[t].check(cell, state, sudokuCopy); // return showcaseSudoku...\n          // ...and updatedSudoku.\n\n          if (showcase) {\n            // ...report the solution.\n            // report to console\n            console.log(techniques[t].name + \"\\t@ (\" + cell.col + \",\" + cell.row + \")\");\n            pushState();\n            return true;\n          }\n        }\n      }\n\n      console.log(\"No solution was found.\");\n      return false;\n    }\n  };\n\n  const reportSolution = (technique, cell, report) => {\n    // report to console\n    console.log(technique.name + \"\\t@ (\" + cell.col + \",\" + cell.row + \") = \" + report.solution.val); // store solution in state\n\n    cell.val = report.solution.val;\n    cell.notes = convert2Notes(cell.suspects);\n    state.sudoku.houses[cell.house][cell.room] = cell;\n    state.sudoku.rows[cell.row][cell.col] = cell;\n    state.sudoku.cols[cell.col][cell.row] = cell; // update affected cell notes\n\n    for (let aff of state.unsolved.values()) {\n      // TODO: this behavior must be able to manage technique-specific note updates\n      if (aff.row === cell.row || aff.col === cell.col || aff.house === cell.house) {\n        //findSuspects(aff);\n        state.sudoku.houses[aff.house][aff.room].notes = convert2Notes(aff.suspects);\n      }\n    } // push state as props to Sudoku\n\n\n    pushState();\n  };\n\n  const buildEmpty2DArray = () => {\n    var result = new Array(9);\n\n    for (let i = 0; i < 9; i++) {\n      result[i] = new Array(9);\n    }\n\n    return result;\n  };\n\n  const buildNewCell = (y, x, h, r, v, s) => {\n    return {\n      row: y,\n      col: x,\n      house: h,\n      room: r,\n      val: v,\n      set: s,\n      notes: [1, 1, 1, 1, 1, 1, 1, 1, 1]\n    };\n  }; // eureka!\n\n\n  const copyState = () => {\n    return {\n      sudoku: copySudoku(state.sudoku),\n      unsolved: new Map(state.unsolved)\n    };\n  };\n\n  const copySudoku = sudoku => {\n    let copy = {\n      rows: buildEmpty2DArray(),\n      cols: buildEmpty2DArray(),\n      houses: buildEmpty2DArray()\n    };\n\n    for (let h = 0; h < 9; h++) {\n      for (let r = 0; r < 9; r++) {\n        let y = 3 * Math.floor(h / 3) + Math.floor(r / 3);\n        let x = 3 * (h % 3) + r % 3; // create cell object\n\n        var cell = copyCell(sudoku.houses[h][r]); // store cell in each state object\n\n        copy.houses[h][r] = cell;\n        copy.rows[y][x] = cell;\n        copy.cols[x][y] = cell;\n      }\n    }\n\n    return copy;\n  };\n\n  const copyCell = cell => {\n    return {\n      row: cell.row,\n      col: cell.col,\n      house: cell.house,\n      val: cell.val,\n      set: cell.set,\n      notes: [...cell.notes]\n    };\n  };\n\n  const findSuspects = (cell, axes = [state.sudoku.rows, state.sudoku.cols, state.sudoku.houses]) => {\n    let indexes = [cell.row, cell.col, cell.house]; // for each axis (row, col, house) this cell belongs to...\n\n    for (let i = 0; i < 3; i++) {\n      // ...for each cell in that axis...\n      axes[i][indexes[i]].forEach(other => {\n        // ...if the cell's value is set...\n        if (other.val >= 1 && other.val <= 9) {\n          // ...remove it from suspect list.\n          cell.notes[other.val - 1] = 0;\n        }\n      });\n    }\n  };\n\n  const convert2Notes = suspects => {\n    var notes = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n    suspects.forEach(val => {\n      notes[val - 1] = 1;\n    });\n    return notes;\n  };\n\n  return /*#__PURE__*/_jsxDEV(StyledDiv, {\n    children: [/*#__PURE__*/_jsxDEV(Sudoku, {\n      sudoku: state.sudoku\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Controls, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => loadSudoku(input),\n        children: \"load\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: getNextSolution,\n        children: \"solve\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 281,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SudokuController, \"yua82o5JV2p+bdzgVd8naWBubMo=\");\n\n_c = SudokuController;\nconst StyledDiv = styled.div`\n  display: grid;\n  grid-template-rows: min(80vw, 80vh) 1fr;\n  grid-template-columns: 1fr;\n  grid-gap: 2rem;\n  width: min(80vw, 80vh);\n  height: 100%;\n`;\n_c2 = StyledDiv;\nconst Controls = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 2em;\n  width: 100%;\n`;\n_c3 = Controls;\nconst Button = styled.button`\n  flex-grow: 1;\n  font-size: 24px;\n\n  border: 2px solid ${colors.sudokuBorder};\n  color: ${colors.sudokuBorder};\n  background-color: transparent;\n  padding: 0.2em;\n  border-radius: 1em;\n  transition: all 0.3s ease;\n  &:hover {\n    background-color: ${colors.sudokuBorder};\n    color: ${colors.appBG};\n    transform: scale(1.05);\n  }\n  &:active {\n    transition: all 0.05 ease-in;\n    background-color: ${colors.sudokuBG1};\n    transform: scale(1.025);\n    color: ${colors.sudokuBorder};\n  }\n`;\n_c4 = Button;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"SudokuController\");\n$RefreshReg$(_c2, \"StyledDiv\");\n$RefreshReg$(_c3, \"Controls\");\n$RefreshReg$(_c4, \"Button\");","map":{"version":3,"sources":["/Users/Gabe/Documents/Projects/sudokoo/src/components/SudokuController.js"],"names":["React","useState","styled","colors","Sudoku","nakedSingle","hiddenSingle","nakedPair","lockedCandidate","pointingTuple","SudokuController","props","state","setState","techniques","input","loadSudoku","console","log","sudoku","rows","buildEmpty2DArray","cols","houses","unsolved","h","r","y","Math","floor","x","val","isUnsolved","cell","buildNewCell","push","axes","values","indexes","row","col","house","i","forEach","other","notes","pushState","localState","getNextSolution","size","sudokuCopy","copySudoku","t","length","showcase","check","name","reportSolution","technique","report","solution","convert2Notes","suspects","room","aff","result","Array","v","s","set","copyState","Map","copy","copyCell","findSuspects","StyledDiv","div","Controls","Button","button","sudokuBorder","appBG","sudokuBG1"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { colors } from \"../colors.js\";\nimport { Sudoku } from \"./sudoku\";\nimport {\n  nakedSingle,\n  hiddenSingle,\n  nakedPair,\n  lockedCandidate,\n  pointingTuple,\n} from \"./techniques\";\n\nexport const SudokuController = (props) => {\n  const [state, setState] = useState([]);\n  var techniques = [\n    nakedSingle,\n    hiddenSingle,\n    nakedPair,\n    lockedCandidate,\n    pointingTuple,\n  ];\n\n  // Naked Single Test\n  var input = [\n    [0, 4, 9, 0, 0, 0, 0, 3, 0],\n    [0, 5, 0, 6, 1, 0, 0, 0, 0],\n    [0, 0, 8, 0, 2, 9, 5, 0, 6],\n    [8, 0, 0, 9, 0, 7, 0, 0, 4],\n    [7, 0, 0, 0, 0, 0, 0, 8, 1],\n    [0, 2, 5, 0, 4, 1, 3, 0, 0],\n    [2, 0, 0, 0, 7, 6, 0, 1, 0],\n    [5, 0, 0, 4, 0, 8, 7, 0, 0],\n    [0, 8, 7, 0, 0, 0, 0, 9, 5],\n  ];\n\n  // Hidden Single Test\n  // var input = [\n  //   [0, 7, 2, 3, 0, 0, 9, 0, 0],\n  //   [0, 5, 0, 6, 0, 9, 0, 2, 0],\n  //   [6, 0, 0, 0, 1, 0, 0, 3, 0],\n  //   [0, 0, 0, 0, 0, 0, 2, 0, 0],\n  //   [0, 4, 5, 8, 2, 3, 0, 7, 0],\n  //   [0, 3, 0, 4, 0, 0, 0, 0, 8],\n  //   [7, 0, 0, 0, 0, 0, 0, 0, 4],\n  //   [0, 2, 0, 5, 0, 8, 0, 6, 0],\n  //   [0, 0, 3, 0, 0, 1, 7, 0, 0],\n  // ];\n\n  // Naked Pair Test\n  // var input = [\n  //   [0, 3, 0, 0, 0, 8, 0, 0, 7],\n  //   [8, 0, 0, 3, 0, 0, 2, 6, 0],\n  //   [0, 0, 0, 0, 2, 9, 8, 3, 4],\n  //   [0, 0, 0, 0, 0, 4, 3, 0, 0],\n  //   [6, 0, 8, 1, 3, 2, 0, 0, 9],\n  //   [0, 0, 3, 0, 0, 0, 0, 0, 0],\n  //   [1, 0, 5, 4, 9, 3, 7, 8, 0],\n  //   [0, 8, 0, 2, 7, 1, 0, 0, 3],\n  //   [3, 0, 7, 8, 0, 0, 0, 1, 0],\n  // ];\n\n  // input is a 2d array of starting values\n  const loadSudoku = (input) => {\n    console.log(\"Loading Sudoku...\");\n\n    state.sudoku = {\n      rows: buildEmpty2DArray(),\n      cols: buildEmpty2DArray(),\n      houses: buildEmpty2DArray(),\n    };\n    state.unsolved = [];\n\n    // for every sudoku cell...\n    for (let h = 0; h < 9; h++) {\n      for (let r = 0; r < 9; r++) {\n        let y = 3 * Math.floor(h / 3) + Math.floor(r / 3);\n        let x = 3 * (h % 3) + (r % 3);\n\n        // create cell object\n        let val = input[y][x];\n        let isUnsolved = !(val >= 1 && val <= 9);\n        var cell = buildNewCell(y, x, h, r, val, !isUnsolved);\n        // store cell in each state object\n        state.sudoku.houses[h][r] = cell;\n        state.sudoku.rows[y][x] = cell;\n        state.sudoku.cols[x][y] = cell;\n        if (isUnsolved) state.unsolved.push(cell);\n      }\n    }\n\n    // identify each cell's suspect values\n    let axes = [state.sudoku.rows, state.sudoku.cols, state.sudoku.houses];\n    for (let cell of state.unsolved.values()) {\n      let indexes = [cell.row, cell.col, cell.house];\n      // for each axis (row, col, house) this cell belongs to...\n      for (let i = 0; i < 3; i++) {\n        // ...for each cell in that axis...\n        axes[i][indexes[i]].forEach((other) => {\n          // ...if the cell's value is set...\n          if (other.val >= 1 && other.val <= 9) {\n            // ...remove it from suspect list.\n            cell.notes[other.val - 1] = 0;\n          }\n        });\n      }\n    }\n\n    // push to Sudoku as props\n    pushState();\n\n    //console.log(localState);\n    console.log(\"...Sudoku Loaded\");\n  };\n\n  const pushState = () => {\n    let localState = {\n      sudoku: state.sudoku,\n      unsolved: state.unsolved,\n    };\n    setState(localState);\n  };\n\n  const getNextSolution = () => {\n    if (state.unsolved.size === 0) {\n      console.log(\"Nothing left to solve.\");\n      return false;\n    } else {\n      let sudokuCopy = copySudoku(state.sudoku);\n      // for each solving technique...\n      for (let t = 0; t < techniques.length; t++) {\n        // ...for each unsolved cell...\n        for (let cell of state.unsolved) {\n          // ...if this cell can be solved w this technique...\n          let showcase = techniques[t].check(cell, state, sudokuCopy);\n          // return showcaseSudoku...\n          // ...and updatedSudoku.\n          if (showcase) {\n            // ...report the solution.\n            // report to console\n            console.log(\n              techniques[t].name + \"\\t@ (\" + cell.col + \",\" + cell.row + \")\"\n            );\n\n            pushState();\n            return true;\n          }\n        }\n      }\n      console.log(\"No solution was found.\");\n      return false;\n    }\n  };\n\n  const reportSolution = (technique, cell, report) => {\n    // report to console\n    console.log(\n      technique.name +\n        \"\\t@ (\" +\n        cell.col +\n        \",\" +\n        cell.row +\n        \") = \" +\n        report.solution.val\n    );\n\n    // store solution in state\n    cell.val = report.solution.val;\n    cell.notes = convert2Notes(cell.suspects);\n    state.sudoku.houses[cell.house][cell.room] = cell;\n    state.sudoku.rows[cell.row][cell.col] = cell;\n    state.sudoku.cols[cell.col][cell.row] = cell;\n\n    // update affected cell notes\n    for (let aff of state.unsolved.values()) {\n      // TODO: this behavior must be able to manage technique-specific note updates\n      if (\n        aff.row === cell.row ||\n        aff.col === cell.col ||\n        aff.house === cell.house\n      ) {\n        //findSuspects(aff);\n        state.sudoku.houses[aff.house][aff.room].notes = convert2Notes(\n          aff.suspects\n        );\n      }\n    }\n\n    // push state as props to Sudoku\n    pushState();\n  };\n\n  const buildEmpty2DArray = () => {\n    var result = new Array(9);\n    for (let i = 0; i < 9; i++) {\n      result[i] = new Array(9);\n    }\n    return result;\n  };\n\n  const buildNewCell = (y, x, h, r, v, s) => {\n    return {\n      row: y,\n      col: x,\n      house: h,\n      room: r,\n      val: v,\n      set: s,\n      notes: [1, 1, 1, 1, 1, 1, 1, 1, 1],\n    };\n  };\n\n  // eureka!\n  const copyState = () => {\n    return {\n      sudoku: copySudoku(state.sudoku),\n      unsolved: new Map(state.unsolved),\n    };\n  };\n\n  const copySudoku = (sudoku) => {\n    let copy = {\n      rows: buildEmpty2DArray(),\n      cols: buildEmpty2DArray(),\n      houses: buildEmpty2DArray(),\n    };\n    for (let h = 0; h < 9; h++) {\n      for (let r = 0; r < 9; r++) {\n        let y = 3 * Math.floor(h / 3) + Math.floor(r / 3);\n        let x = 3 * (h % 3) + (r % 3);\n\n        // create cell object\n        var cell = copyCell(sudoku.houses[h][r]);\n\n        // store cell in each state object\n        copy.houses[h][r] = cell;\n        copy.rows[y][x] = cell;\n        copy.cols[x][y] = cell;\n      }\n    }\n    return copy;\n  };\n\n  const copyCell = (cell) => {\n    return {\n      row: cell.row,\n      col: cell.col,\n      house: cell.house,\n      val: cell.val,\n      set: cell.set,\n      notes: [...cell.notes],\n    };\n  };\n\n  const findSuspects = (\n    cell,\n    axes = [state.sudoku.rows, state.sudoku.cols, state.sudoku.houses]\n  ) => {\n    let indexes = [cell.row, cell.col, cell.house];\n    // for each axis (row, col, house) this cell belongs to...\n    for (let i = 0; i < 3; i++) {\n      // ...for each cell in that axis...\n      axes[i][indexes[i]].forEach((other) => {\n        // ...if the cell's value is set...\n        if (other.val >= 1 && other.val <= 9) {\n          // ...remove it from suspect list.\n          cell.notes[other.val - 1] = 0;\n        }\n      });\n    }\n  };\n\n  const convert2Notes = (suspects) => {\n    var notes = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n    suspects.forEach((val) => {\n      notes[val - 1] = 1;\n    });\n    return notes;\n  };\n\n  return (\n    <StyledDiv>\n      <Sudoku sudoku={state.sudoku}></Sudoku>\n      <Controls>\n        <Button onClick={() => loadSudoku(input)}>load</Button>\n        <Button onClick={getNextSolution}>solve</Button>\n      </Controls>\n    </StyledDiv>\n  );\n};\n\nconst StyledDiv = styled.div`\n  display: grid;\n  grid-template-rows: min(80vw, 80vh) 1fr;\n  grid-template-columns: 1fr;\n  grid-gap: 2rem;\n  width: min(80vw, 80vh);\n  height: 100%;\n`;\n\nconst Controls = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 2em;\n  width: 100%;\n`;\n\nconst Button = styled.button`\n  flex-grow: 1;\n  font-size: 24px;\n\n  border: 2px solid ${colors.sudokuBorder};\n  color: ${colors.sudokuBorder};\n  background-color: transparent;\n  padding: 0.2em;\n  border-radius: 1em;\n  transition: all 0.3s ease;\n  &:hover {\n    background-color: ${colors.sudokuBorder};\n    color: ${colors.appBG};\n    transform: scale(1.05);\n  }\n  &:active {\n    transition: all 0.05 ease-in;\n    background-color: ${colors.sudokuBG1};\n    transform: scale(1.025);\n    color: ${colors.sudokuBorder};\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}